/**
 * LA VAGUE - Complete Translation Dictionary
 * Comprehensive translations for all UI elements
 */

const TRANSLATIONS = {
    en: {
        nav: {
            home: 'Home',
            shop: 'Shop',
            collections: 'Collections',
            lookbook: 'Lookbook',
            about: 'About',
            contact: 'Contact',
            cart: 'Cart',
            wishlist: 'Wishlist',
            search: 'Search',
            menu: 'Menu'
        },
        product: {
            addToCart: 'Add to Cart',
            soldOut: 'Sold Out',
            sizeGuide: 'Size Guide',
            description: 'Description',
            shipping: 'Shipping & Returns',
            reviews: 'Customer Reviews',
            writeReview: 'Write a Review',
            submitReview: 'Submit Review',
            rating: 'Rating',
            reviewTitle: 'Review Title',
            reviewText: 'Your Review',
            yourName: 'Your Name',
            email: 'Email',
            orderId: 'Order ID (optional)',
            verifiedPurchase: 'Verified Purchase',
            quickView: 'Quick View',
            color: 'Color',
            size: 'Size',
            select: 'Select',
            quantity: 'Quantity',
            freeShipping: 'Free shipping over {{threshold}}',
            shipsIn: 'Ships within 24 hours',
            returns: '30-day returns',
            youMayAlsoLike: 'You May Also Like'
        },
        announcement: {
            freeShipping: 'FREE SHIPPING ON ORDERS OVER {{threshold}}',
            newDrop: 'NEW DROP AVAILABLE NOW'
        },
        cart: {
            title: 'Your Cart',
            empty: 'Your cart is empty',
            continueShopping: 'Continue Shopping',
            subtotal: 'Subtotal',
            checkout: 'Checkout',
            remove: 'Remove'
        },
        shop: {
            filters: 'Filters',
            categories: 'Categories',
            all: 'All',
            sortBy: 'Sort by',
            featured: 'Featured',
            priceLow: 'Price: Low to High',
            priceHigh: 'Price: High to Low',
            newest: 'Newest',
            sale: 'Sale',
            new: 'New',
            bestseller: 'Bestseller',
            clearAll: 'Clear All',
            results: 'products'
        },
        checkout: {
            title: 'Checkout',
            contact: 'Contact Information',
            shipping: 'Shipping Address',
            payment: 'Payment',
            firstName: 'First Name',
            lastName: 'Last Name',
            email: 'Email',
            phone: 'Phone',
            address: 'Address',
            city: 'City',
            state: 'State',
            zip: 'ZIP Code',
            country: 'Country',
            cardNumber: 'Card Number',
            expiry: 'MM/YY',
            cvv: 'CVV',
            pay: 'Pay',
            orderSummary: 'Order Summary',
            discount: 'Discount',
            total: 'Total'
        },
        common: {
            close: 'Close',
            loading: 'Loading...',
            error: 'Error',
            success: 'Success',
            submit: 'Submit',
            cancel: 'Cancel',
            save: 'Save',
            delete: 'Delete',
            edit: 'Edit',
            view: 'View',
            back: 'Back',
            next: 'Next',
            search: 'Search',
            apply: 'Apply'
        }
    },
    fr: {
        nav: {
            home: 'Accueil',
            shop: 'Boutique',
            collections: 'Collections',
            lookbook: 'Lookbook',
            about: 'À Propos',
            contact: 'Contact',
            cart: 'Panier',
            wishlist: 'Favoris',
            search: 'Recherche',
            menu: 'Menu'
        },
        product: {
            addToCart: 'Ajouter au Panier',
            soldOut: 'Épuisé',
            sizeGuide: 'Guide des Tailles',
            description: 'Description',
            shipping: 'Livraison & Retours',
            reviews: 'Avis Clients',
            writeReview: 'Écrire un Avis',
            submitReview: 'Soumettre',
            rating: 'Note',
            reviewTitle: 'Titre de l\'avis',
            reviewText: 'Votre avis',
            yourName: 'Votre nom',
            email: 'Email',
            orderId: 'N° de commande (optionnel)',
            verifiedPurchase: 'Achat Vérifié',
            quickView: 'Aperçu Rapide',
            color: 'Couleur',
            size: 'Taille',
            select: 'Sélectionner',
            quantity: 'Quantité',
            freeShipping: 'Livraison gratuite dès {{threshold}}',
            shipsIn: 'Expédié sous 24h',
            returns: 'Retours sous 30 jours',
            youMayAlsoLike: 'Vous Aimerez Aussi'
        },
        announcement: {
            freeShipping: 'LIVRAISON GRATUITE DÈS {{threshold}}',
            newDrop: 'NOUVELLE COLLECTION DISPONIBLE'
        },
        cart: {
            title: 'Votre Panier',
            empty: 'Votre panier est vide',
            continueShopping: 'Continuer les achats',
            subtotal: 'Sous-total',
            checkout: 'Commander',
            remove: 'Retirer'
        },
        shop: {
            filters: 'Filtres',
            categories: 'Catégories',
            all: 'Tout',
            sortBy: 'Trier par',
            featured: 'En vedette',
            priceLow: 'Prix: Croissant',
            priceHigh: 'Prix: Décroissant',
            newest: 'Nouveautés',
            sale: 'Soldes',
            new: 'Nouveau',
            bestseller: 'Meilleures ventes',
            clearAll: 'Tout effacer',
            results: 'produits'
        },
        checkout: {
            title: 'Commande',
            contact: 'Informations de contact',
            shipping: 'Adresse de livraison',
            payment: 'Paiement',
            firstName: 'Prénom',
            lastName: 'Nom',
            email: 'Email',
            phone: 'Téléphone',
            address: 'Adresse',
            city: 'Ville',
            state: 'État',
            zip: 'Code postal',
            country: 'Pays',
            cardNumber: 'Numéro de carte',
            expiry: 'MM/AA',
            cvv: 'CVV',
            pay: 'Payer',
            orderSummary: 'Résumé de la commande',
            discount: 'Réduction',
            total: 'Total'
        },
        common: {
            close: 'Fermer',
            loading: 'Chargement...',
            error: 'Erreur',
            success: 'Succès',
            submit: 'Soumettre',
            cancel: 'Annuler',
            save: 'Enregistrer',
            delete: 'Supprimer',
            edit: 'Modifier',
            view: 'Voir',
            back: 'Retour',
            next: 'Suivant',
            search: 'Rechercher',
            apply: 'Appliquer'
        }
    },
    ar: {
        nav: {
            home: 'الرئيسية',
            shop: 'المتجر',
            collections: 'المجموعات',
            lookbook: 'لوك بوك',
            about: 'من نحن',
            contact: 'اتصل بنا',
            cart: 'سلة التسوق',
            wishlist: 'المفضلة',
            search: 'بحث',
            menu: 'القائمة'
        },
        product: {
            addToCart: 'أضف إلى السلة',
            soldOut: 'نفذت الكمية',
            sizeGuide: 'دليل المقاسات',
            description: 'الوصف',
            shipping: 'الشحن والإرجاع',
            reviews: 'تقييمات العملاء',
            writeReview: 'كتابة تقييم',
            submitReview: 'إرسال التقييم',
            rating: 'التقييم',
            reviewTitle: 'عنوان التقييم',
            reviewText: 'تقييمك',
            yourName: 'الاسم',
            email: 'البريد الإلكتروني',
            orderId: 'رقم الطلب (اختياري)',
            verifiedPurchase: 'شراء موثق',
            quickView: 'نظرة سريعة',
            color: 'اللون',
            size: 'المقاس',
            select: 'اختيار',
            quantity: 'الكمية',
            freeShipping: 'شحن مجاني للطلبات فوق {{threshold}}',
            shipsIn: 'الش خلال 24 ساعة',
            returns: 'إرجاع خلال 30 يوم',
            youMayAlsoLike: 'قد يعجبك أيضاً'
        },
        announcement: {
            freeShipping: 'شحن مجاني للطلبات فوق {{threshold}}',
            newDrop: 'تشكيلة جديدة متوفرة الآن'
        },
        cart: {
            title: 'سلة التسوق',
            empty: 'سلة التسوق فارغة',
            continueShopping: 'مواصلة التسوق',
            subtotal: 'المجموع الفرعي',
            checkout: 'إتمام الشراء',
            remove: 'إزالة'
        },
        shop: {
            filters: 'فلاتر',
            categories: 'الفئات',
            all: 'الكل',
            sortBy: 'ترتيب حسب',
            featured: 'مميز',
            priceLow: 'السعر: من الأقل للأعلى',
            priceHigh: 'السعر: من الأعلى للأقل',
            newest: 'الأحدث',
            sale: 'تخفيض',
            new: 'جديد',
            bestseller: 'الأكثر مبيعاً',
            clearAll: 'مسح الكل',
            results: 'منتجات'
        },
        checkout: {
            title: 'إتمام الشراء',
            contact: 'معلومات الاتصال',
            shipping: 'عنوان الشحن',
            payment: 'الدفع',
            firstName: 'الاسم الأول',
            lastName: 'اسم العائلة',
            email: 'البريد الإلكتروني',
            phone: 'الهاتف',
            address: 'العنوان',
            city: 'المدينة',
            state: 'المنطقة',
            zip: 'الرمز البريدي',
            country: 'الدولة',
            cardNumber: 'رقم البطاقة',
            expiry: 'شهر/سنة',
            cvv: 'رمز الأمان',
            pay: 'دفع',
            orderSummary: 'ملخص الطلب',
            discount: 'الخصم',
            total: 'الإجمالي'
        },
        common: {
            close: 'إغلاق',
            loading: 'جاري التحميل...',
            error: 'خطأ',
            success: 'نجاح',
            submit: 'إرسال',
            cancel: 'إلغاء',
            save: 'حفظ',
            delete: 'حذف',
            edit: 'تعديل',
            view: 'عرض',
            back: 'رجوع',
            next: 'التالي',
            search: 'بحث',
            apply: 'تطبيق'
        }
    }
};

// Translation helper function
function t(key, vars = {}, lang = null) {
    const currentLang = lang || localStorage.getItem('preferredLanguage') || 'en';
    const keys = key.split('.');
    let value = TRANSLATIONS[currentLang];
    
    for (const k of keys) {
        if (value && typeof value === 'object' && k in value) {
            value = value[k];
        } else {
            // Fallback to English
            value = TRANSLATIONS.en;
            for (const k2 of keys) {
                value = value?.[k2] || key;
            }
            break;
        }
    }
    
    if (typeof value !== 'string') return key;

    // Replace variables
    Object.keys(vars).forEach(varKey => {
        value = value.replace(new RegExp(`{{${varKey}}}`, 'g'), vars[varKey]);
    });
    
    return value;
}

// Apply translations to elements with data-i18n attribute
function applyTranslations() {
    const lang = localStorage.getItem('laVagueLanguage') || localStorage.getItem('preferredLanguage') || 'en';
    
        // Get dynamic values for variables
        const threshold = (window.GlobalSettings) ?
            window.GlobalSettings.settings.freeShippingThreshold : 0;    const formattedThreshold = (window.CurrencyConfig) ? 
        window.CurrencyConfig.formatPrice(threshold) : `₦${threshold.toLocaleString()}`;
    
    const vars = { threshold: formattedThreshold };

    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const translation = t(key, vars, lang);
        if (translation && translation !== key) {
            if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                if (el.hasAttribute('placeholder')) {
                    el.placeholder = translation;
                }
            } else {
                // For buttons with icons, preserve the icon SVG
                if (el.querySelector('svg')) {
                    const svg = el.querySelector('svg');
                    el.innerHTML = '';
                    el.appendChild(svg);
                    el.appendChild(document.createTextNode(' ' + translation));
                } else {
                    el.textContent = translation;
                }
            }
        }
    });
    
    // Also translate placeholders
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        const translation = t(key, vars, lang);
        if (translation) {
            el.placeholder = translation;
        }
    });
}

// Initialize translations on page load
document.addEventListener('DOMContentLoaded', applyTranslations);
